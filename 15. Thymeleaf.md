# üå± Thymeleaf

## ü•ò 1. Thymeleaf l√† g√¨?

- **Thymeleaf** l√† m·ªôt **Java template engine** d√πng ƒë·ªÉ k·∫øt h·ª£p **HTML + d·ªØ li·ªáu t·ª´ Java backend**.

---

## üçú 2. Th∆∞ m·ª•c c·∫•u tr√∫c d·ª± √°n

| Lo·∫°i file             | V·ªã tr√≠                          |
| --------------------- | ------------------------------- |
| `.html` view          | `src/main/resources/templates/` |
| `.css`, `.js`, `.img` | `src/main/resources/static/`    |

---

## üåÆ 3. C·∫•u tr√∫c Controller k·∫øt h·ª£p Thymeleaf

```java
@Controller
public class HomeController {

    @GetMapping("/")
    public String home(Model model) {
        model.addAttribute("name", "SpringMall");
        return "index";
    }
}
```

> Tr·∫£ v·ªÅ templates/index.html

---

## üçô 4. C√°c th·∫ª v√† thu·ªôc t√≠nh trong Thymeleaf

| Thu·ªôc t√≠nh           | Ch·ª©c nƒÉng               | V√≠ d·ª•                                                     |
| -------------------- | ----------------------- | --------------------------------------------------------- |
| `th:text`            | Hi·ªÉn th·ªã n·ªôi dung       | `<p th:text="${name}"></p>`                               |
| `th:href`            | G√°n link ƒë·ªông           | `<a th:href="@{/about}">About</a>`                        |
| `th:src`             | Link ·∫£nh ƒë·ªông           | `<img th:src="@{/img/logo.png}">`                         |
| `th:if`, `th:unless` | R·∫Ω nh√°nh hi·ªÉn th·ªã       | `<p th:if="${isAdmin}">Admin</p>`                         |
| `th:each`            | L·∫∑p danh s√°ch           | `<li th:each="p : ${products}" th:text="${p.name}"></li>` |
| `th:value`           | G√°n value input         | `<input th:value="${username}"/>`                         |
| `th:object` + `*{}`  | Binding form v·ªõi object | `<form th:object="${user}"> <input th:field="*{email}"/>` |

---

## ‚úÖ 6. BI·ªÇU TH·ª®C THYMELEAF

| Bi·ªÉu th·ª©c            | C√∫ ph√°p               | √ù nghƒ©a                               |     |                      |
| -------------------- | --------------------- | ------------------------------------- | --- | -------------------- |
| **Variable**         | `${name}`             | L·∫•y bi·∫øn t·ª´ model                     |     |                      |
| **Selection**        | `*{field}`            | D√πng v·ªõi `th:object` trong form       |     |                      |
| **Message (i18n)**   | `#{app.title}`        | L·∫•y chu·ªói t·ª´ `messages.properties`    |     |                      |
| **URL Link**         | `@{/path}`            | T·∫°o URL ƒë·ªông                          |     |                      |
| **Literal / Format** | \`                    | Hello \${name}                        | \`  | D·ªÖ d√†ng format chu·ªói |
| **Fragment**         | `~{layout :: header}` | Import file HTML kh√°c (gi·ªëng include) |     |                      |

---

## ‚úÖ 7. D√ôNG FORM V·ªöI THYMELEAF

```java
model.addAttribute("user", new User());
```

```html
<form th:action="@{/register}" th:object="${user}" method="post">
  <input type="text" th:field="*{username}" />
  <input type="password" th:field="*{password}" />
  <button type="submit">ƒêƒÉng k√Ω</button>
</form>
```

---

## ‚úÖ 8. ƒêI·ªÄU KI·ªÜN, L·∫∂P, TO√ÅN T·ª¨

```html
<!-- ƒêi·ªÅu ki·ªán -->
<p th:if="${age >= 18}">Tr∆∞·ªüng th√†nh</p>
<p th:unless="${isAdmin}">B·∫°n kh√¥ng ph·∫£i admin</p>

<!-- L·∫∑p -->
<ul>
  <li th:each="product : ${products}" th:text="${product.name}"></li>
</ul>

<!-- Ternary -->
<p th:text="${gender == 'M' ? 'Nam' : 'N·ªØ'}"></p>
```

---

## ‚úÖ 9. LAYOUT V·ªöI THYMELEAF ‚Äì D√ôNG `fragment`

### üìÅ `layout.html` ‚Äì file g·ªëc

```html
<html>
  <body>
    <div th:fragment="header">ƒê√¢y l√† header</div>
    <div th:fragment="footer">ƒê√¢y l√† footer</div>
  </body>
</html>
```

### üìÑ `home.html` ‚Äì s·ª≠ d·ª•ng:

```html
<html>
  <body>
    <div th:replace="~{layout :: header}"></div>
    <h1>Trang ch·ªß</h1>
    <div th:replace="~{layout :: footer}"></div>
  </body>
</html>
```

---

## ‚úÖ 10. T∆Ø∆†NG T√ÅC ƒêA NG√îN NG·ªÆ (i18n)

### üìÅ `messages.properties`

```properties
greeting=Ch√†o b·∫°n
```

### üìÅ `messages_en.properties`

```properties
greeting=Hello there
```

### üìÑ HTML

```html
<p th:text="#{greeting}"></p>
```

‚û°Ô∏è S·∫Ω t·ª± ƒë·ªïi theo locale ng∆∞·ªùi d√πng (n·∫øu c·∫•u h√¨nh `LocaleResolver`)

---

## ‚úÖ 11. D·ªÆ LI·ªÜU T·ª™ CONTROLLER

| T·ª´ Java                   | Sang View                      |
| ------------------------- | ------------------------------ |
| `String name = "Huy"`     | `${name}`                      |
| `User user`               | `${user.username}`, `*{email}` |
| `List<Product> products`  | `th:each="p : ${products}"`    |
| `Map<String, Object> map` | `${map.key}`                   |

---

## ‚úÖ 12. L·ªñI TH∆Ø·ªúNG G·∫∂P

| L·ªói                   | Nguy√™n nh√¢n                         |
| --------------------- | ----------------------------------- |
| `Template not found`  | File kh√¥ng n·∫±m ƒë√∫ng `templates/`    |
| Bi·∫øn `${...}` b·ªã null | Kh√¥ng g√°n t·ª´ `model.addAttribute()` |
| Form kh√¥ng bind ƒë∆∞·ª£c  | Thi·∫øu `th:object`, ho·∫∑c `*{}` sai   |
| URL `@{}` b·ªã sai      | Thi·∫øu `{}` ho·∫∑c tham s·ªë URL         |

---

## ‚úÖ K·∫æT LU·∫¨N

| ƒê·∫∑c ƒëi·ªÉm                                    | L·ª£i √≠ch                     |
| ------------------------------------------- | --------------------------- |
| ƒê∆∞·ª£c t√≠ch h·ª£p s·∫µn trong Spring Boot         | Kh√¥ng c·∫ßn c·∫•u h√¨nh ph·ª©c t·∫°p |
| Giao di·ªán HTML d·ªÖ vi·∫øt                      | Kh√¥ng b·ªã ph√° layout         |
| T∆∞∆°ng th√≠ch v·ªõi Form, i18n, layout          | ‚úîÔ∏è                          |
| H·ªçc m·ªôt l·∫ßn, d√πng c·∫£ ƒë·ªùi v·ªõi Spring Web MVC | üî•                          |

---

B·∫°n mu·ªën m√¨nh **d·ª±ng m·ªôt mini project Spring Boot d√πng Thymeleaf** bao g·ªìm:

- Trang ch·ªß
- Trang form login
- Trang danh s√°ch s·∫£n ph·∫©m
- C√≥ layout v√† fragment

üëâ C·ª© n√≥i "D·ª±ng Thymeleaf demo", m√¨nh t·∫°o lu√¥n ƒë·ªß controller, HTML, DTO, style... ch·∫°y ƒë∆∞·ª£c ngay nh√© üîßü§ñ
