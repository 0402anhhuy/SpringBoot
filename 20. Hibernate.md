# ğŸŒ± Hibernate

## ğŸ¥¦ KhÃ¡i niá»‡m Hibernate

> **Hibernate** lÃ  má»™t **ORM (Object Relational Mapping) framework** trong Java

- DÃ¹ng **object Java (class)** thay vÃ¬ pháº£i viáº¿t tay SQL

- Tá»± Ä‘á»™ng Ã¡nh xáº¡ (`@Entity`, `@Column`, ...) giá»¯a **Java Object â†” Table trong DB**

- Quáº£n lÃ½ session, transaction, cache, lazy loading,...

## ğŸ¹ CÃ¡c annotation quan trá»ng trong Hibernate

| Annotation                     | Ã nghÄ©a                           |
| ------------------------------ | --------------------------------- |
| `@Entity`                      | ÄÃ¡nh dáº¥u class lÃ  1 báº£ng trong DB |
| `@Id`                          | Äá»‹nh nghÄ©a khÃ³a chÃ­nh             |
| `@GeneratedValue`              | Tá»± Ä‘á»™ng tÄƒng giÃ¡ trá»‹ ID           |
| `@Column`                      | Cáº¥u hÃ¬nh chi tiáº¿t cho 1 cá»™t       |
| `@Table(name = "custom_name")` | Äá»•i tÃªn báº£ng                      |
| `@OneToMany`, `@ManyToOne`     | Quan há»‡ giá»¯a cÃ¡c báº£ng             |
| `@JoinColumn`, `@MappedBy`     | Chá»‰ Ä‘á»‹nh khÃ³a ngoáº¡i               |

Chi tiáº¿t [Annotations Relationship](20.1.%20Annotation-Relationship.md)

## ğŸŒ° VÃ²ng Ä‘á»i cá»§a Hibernate

| Tráº¡ng thÃ¡i     | Ã nghÄ©a                                    |
| -------------- | ------------------------------------------ |
| **Transient**  | Má»›i khá»Ÿi táº¡o báº±ng `new`, chÆ°a liÃªn quan DB |
| **Persistent** | Hibernate Ä‘ang quáº£n lÃ½ (Ä‘Ã£ save)           |
| **Detached**   | ÄÃ£ tá»«ng Ä‘Æ°á»£c quáº£n lÃ½ nhÆ°ng session bá»‹ Ä‘Ã³ng |
| **Removed**    | ÄÃ¡nh dáº¥u xÃ³a (sáº½ delete sau khi commit)    |

## ğŸ HQL (Hibernate Query Language)

> Hibernate cÃ³ ngÃ´n ngá»¯ riÃªng gá»i lÃ  **HQL** â€“ giá»‘ng SQL nhÆ°ng dÃ¹ng tÃªn class/property thay vÃ¬ table/column

```java
@Query("SELECT p FROM Product p WHERE p.name LIKE %:name%")
List<Product> searchByName(@Param("name") String name);
```

## ğŸŒ‹ Hibernate Custom validation

- Táº¡o cÃ¡c annotation tÃ¹y chá»‰nh Ä‘á»ƒ kiá»ƒm tra dá»¯ liá»‡u

- Káº¿t há»£p vá»›i Hibernate Validator Ä‘á»ƒ tá»± Ä‘á»™ng kiá»ƒm tra

Chi tiáº¿t [Custom validation](20.2.%20Custom-Validation.md)

## ğŸ—ï¸ Hibernate Criteria API

- Táº¡o truy váº¥n dáº¡ng Ä‘á»™ng theo Ä‘iá»u kiá»‡n runtime

Chi tiáº¿t [Criteria API](20.3.%20Criteria-API.md)

## ğŸ›¸ Hibernate Specification

- Táº¡o truy váº¥n Ä‘á»™ng báº±ng cÃ¡ch káº¿t há»£p cÃ¡c Ä‘iá»u kiá»‡n

Chi tiáº¿t [Specification](20.4.%20Specification.md)
