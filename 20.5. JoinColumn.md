# üå± Annotation **`@JoinColumn`**

## Kh√°i ni·ªám **`@JoinColumn`**

> `@JoinColumn` ƒë∆∞·ª£c d√πng ƒë·ªÉ **ch·ªâ r√µ th√¥ng tin c·ªßa c·ªôt kh√≥a ngo·∫°i (FK)** khi thi·∫øt l·∫≠p c√°c m·ªëi quan h·ªá `@ManyToOne`, `@OneToOne`, `@ManyToMany` (b√™n ch·ªß ƒë·ªông)

```java
@ManyToOne
@JoinColumn(name = "category_id") // Ch·ªâ ƒë·ªãnh t√™n c·ªôt FK
private Category category;
```

> Trong b·∫£ng `product`, Hibernate s·∫Ω t·∫°o ra m·ªôt **c·ªôt `category_id`**, d√πng ƒë·ªÉ √°nh x·∫° t·ªõi b·∫£ng `category`

## ‚úÖ 2. V·ªã tr√≠ d√πng `@JoinColumn`

| Annotation quan h·ªá | C√≥ d√πng `@JoinColumn`?                          | Ghi ch√∫               |
| ------------------ | ----------------------------------------------- | --------------------- |
| `@ManyToOne`       | ‚úÖ C√≥                                           | Quan h·ªá ph·ªï bi·∫øn nh·∫•t |
| `@OneToOne`        | ‚úÖ C√≥                                           | C·∫£ 2 chi·ªÅu            |
| `@OneToMany`       | ‚ùå Kh√¥ng d√πng ·ªü chi·ªÅu b·ªã ƒë·ªông (d√πng `mappedBy`) |                       |
| `@ManyToMany`      | ‚úÖ D√πng trong `@JoinTable`                      |                       |

---

## ‚úÖ 3. C√°c thu·ªôc t√≠nh c·ªßa `@JoinColumn`

| Thu·ªôc t√≠nh             | √ù nghƒ©a                                               |
| ---------------------- | ----------------------------------------------------- |
| `name`                 | T√™n c·ªôt FK trong b·∫£ng hi·ªán t·∫°i                        |
| `referencedColumnName` | T√™n c·ªôt b√™n b·∫£ng g·ªëc ƒë∆∞·ª£c tham chi·∫øu (m·∫∑c ƒë·ªãnh l√† PK) |
| `nullable`             | C√≥ cho ph√©p null kh√¥ng                                |
| `unique`               | C·ªôt FK c√≥ ph·∫£i duy nh·∫•t kh√¥ng                         |
| `insertable`           | C√≥ cho ph√©p insert kh√¥ng                              |
| `updatable`            | C√≥ cho ph√©p update kh√¥ng                              |

---

## ‚úÖ 4. V√≠ d·ª• ƒë·∫ßy ƒë·ªß

### üí° Quan h·ªá `Product` ‚Äì `Category` (N:1)

```java
@Entity
public class Product {

    @Id
    private Long id;

    @ManyToOne
    @JoinColumn(
        name = "category_id",                // FK trong b·∫£ng product
        referencedColumnName = "id",         // PK b·∫£ng category
        nullable = false                     // Kh√¥ng ƒë∆∞·ª£c ƒë·ªÉ null
    )
    private Category category;
}
```

üìå Hibernate s·∫Ω sinh SQL:

```sql
ALTER TABLE product ADD COLUMN category_id BIGINT NOT NULL;
ALTER TABLE product ADD CONSTRAINT FK_category FOREIGN KEY (category_id) REFERENCES category(id);
```

---

## ‚úÖ 5. `@JoinColumn` trong `@OneToOne`

```java
@OneToOne
@JoinColumn(name = "user_profile_id")
private UserProfile profile;
```

‚û° Khi quan h·ªá 1-1: c·ªôt FK `user_profile_id` s·∫Ω **v·ª´a l√† FK v·ª´a l√† unique key**
