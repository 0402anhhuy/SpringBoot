# ðŸŒ± Annotation **`@JoinColumn`**

## KhÃ¡i niá»‡m **`@JoinColumn`**

> `@JoinColumn` Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ **chá»‰ rÃµ thÃ´ng tin cá»§a cá»™t khÃ³a ngoáº¡i (FK)** khi thiáº¿t láº­p cÃ¡c má»‘i quan há»‡ `@ManyToOne`, `@OneToOne`, `@ManyToMany` (bÃªn chá»§ Ä‘á»™ng)

```java
@ManyToOne
@JoinColumn(name = "category_id") // Chá»‰ Ä‘á»‹nh tÃªn cá»™t FK
private Category category;
```

> Trong báº£ng `product`, Hibernate sáº½ táº¡o ra má»™t **cá»™t `category_id`**, dÃ¹ng Ä‘á»ƒ Ã¡nh xáº¡ tá»›i báº£ng `category`

## ðŸŒµ CÃ¡c thuá»™c tÃ­nh cá»§a `@JoinColumn`

| Thuá»™c tÃ­nh             | Ã nghÄ©a                                               |
| ---------------------- | ----------------------------------------------------- |
| `name`                 | TÃªn cá»™t FK trong báº£ng hiá»‡n táº¡i                        |
| `referencedColumnName` | TÃªn cá»™t bÃªn báº£ng gá»‘c Ä‘Æ°á»£c tham chiáº¿u (máº·c Ä‘á»‹nh lÃ  PK) |
| `nullable`             | CÃ³ cho phÃ©p null khÃ´ng                                |
| `unique`               | Cá»™t FK cÃ³ pháº£i duy nháº¥t khÃ´ng                         |
| `insertable`           | CÃ³ cho phÃ©p insert khÃ´ng                              |
| `updatable`            | CÃ³ cho phÃ©p update khÃ´ng                              |

## ðŸµ VÃ­ dá»¥

### ðŸ’¡ Quan há»‡ `Product` â€“ `Category` (N:1)

```java
@Entity
public class Product {

    @Id
    private Long id;

    @ManyToOne
    @JoinColumn(
        name = "category_id",                // FK trong báº£ng product
        referencedColumnName = "id",         // PK báº£ng category
        nullable = false                     // KhÃ´ng Ä‘Æ°á»£c Ä‘á»ƒ null
    )
    private Category category;
}
```

ðŸ“Œ Hibernate sáº½ sinh SQL:

```sql
ALTER TABLE product ADD COLUMN category_id BIGINT NOT NULL;
ALTER TABLE product ADD CONSTRAINT FK_category FOREIGN KEY (category_id) REFERENCES category(id);
```

## ðŸ¥¯ `@JoinColumn` trong `@OneToOne`

```java
@OneToOne
@JoinColumn(name = "user_profile_id")
private UserProfile profile;
```

> Khi quan há»‡ 1-1: cá»™t FK `user_profile_id` sáº½ **vá»«a lÃ  FK vá»«a lÃ  unique key**
