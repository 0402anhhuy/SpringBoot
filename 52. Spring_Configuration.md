# ğŸŒ± Spring Configuration

## âœ… Cáº¥u trÃºc thÆ° má»¥c Spring Boot chuáº©n (cÃ³ `configuration`)

```bash
src
â””â”€â”€ main
    â””â”€â”€ java
        â””â”€â”€ com
            â””â”€â”€ example
                â””â”€â”€ springmall
                    â”œâ”€â”€ SpringmallApplication.java
                    â”œâ”€â”€ config
                    â”‚   â”œâ”€â”€ AppConfig.java
                    â”‚   â”œâ”€â”€ SwaggerConfig.java
                    â”‚   â”œâ”€â”€ SecurityConfig.java
                    â”‚   â”œâ”€â”€ WebMvcConfig.java
                    â”‚   â””â”€â”€ CacheConfig.java
                    â”œâ”€â”€ controller
                    â”œâ”€â”€ service
                    â”œâ”€â”€ repository
                    â”œâ”€â”€ entity
                    â”œâ”€â”€ dto
                    â”œâ”€â”€ exception
                    â””â”€â”€ util
```

---

## ğŸ“¦ Ã nghÄ©a thÆ° má»¥c `config/`:

Trong Spring, má»i class **cáº¥u hÃ¬nh riÃªng** nÃªn Ä‘Æ°á»£c Ä‘áº·t táº¡i:

```
com.example.springmall.config
```

> Má»—i class trong Ä‘Ã³ sáº½ Ä‘Æ°á»£c Ä‘Ã¡nh dáº¥u `@Configuration` hoáº·c tÆ°Æ¡ng Ä‘Æ°Æ¡ng, Ä‘á»ƒ Spring biáº¿t nÃ³ chá»©a bean cáº¥u hÃ¬nh.

---

## ğŸ§  Nhá»¯ng cáº¥u hÃ¬nh thÆ°á»ng dÃ¹ng trong `config/`:

| File                  | Má»¥c Ä‘Ã­ch                                                                       | Annotation                                      |
| --------------------- | ------------------------------------------------------------------------------ | ----------------------------------------------- |
| `AppConfig.java`      | Cáº¥u hÃ¬nh tá»•ng quÃ¡t (bean nhÆ° `ModelMapper`, `RestTemplate`, `PasswordEncoder`) | `@Configuration`                                |
| `SecurityConfig.java` | Spring Security cáº¥u hÃ¬nh                                                       | `@Configuration`, `@EnableWebSecurity`          |
| `SwaggerConfig.java`  | Swagger / OpenAPI docs                                                         | `@Configuration`                                |
| `WebMvcConfig.java`   | Config MVC nhÆ° CORS, Interceptor, ResourceHandler                              | `@Configuration`, `implements WebMvcConfigurer` |
| `CacheConfig.java`    | Redis / Caching                                                                | `@EnableCaching`, `@Configuration`              |

---

## ğŸ§ª VÃ­ dá»¥ cá»¥ thá»ƒ: `AppConfig.java`

```java
@Configuration
public class AppConfig {

    @Bean
    public ModelMapper modelMapper() {
        return new ModelMapper();
    }

    @Bean
    public RestTemplate restTemplate() {
        return new RestTemplate();
    }

    @Bean
    public PasswordEncoder passwordEncoder() {
        return new BCryptPasswordEncoder();
    }
}
```

---

## âœ… LÆ°u Ã½ quan trá»ng:

| Quy táº¯c                                                                                | Ghi chÃº |
| -------------------------------------------------------------------------------------- | ------- |
| Äáº·t cÃ¡c cáº¥u hÃ¬nh vÃ o `config/` Ä‘á»ƒ dá»… quáº£n lÃ½ vÃ  maintain                               | âœ”ï¸      |
| DÃ¹ng `@Configuration`, `@Bean` Ä‘á»ƒ táº¡o bean thá»§ cÃ´ng                                    | âœ”ï¸      |
| Náº¿u cáº¥u hÃ¬nh chá»‰ Ã¡p dá»¥ng cho má»™t module, cÃ³ thá»ƒ táº¡o sub-package nhÆ° `config/security/` | ğŸ“      |

---

## ğŸ“Œ Gá»£i Ã½ má»Ÿ rá»™ng `config/`:

```bash
config
â”œâ”€â”€ AppConfig.java
â”œâ”€â”€ SecurityConfig.java
â”œâ”€â”€ SwaggerConfig.java
â”œâ”€â”€ CorsConfig.java
â””â”€â”€ DataSourceConfig.java
```

## ğŸ“˜ CÃº phÃ¡p chuáº©n trong `application.properties`:

### âœ”ï¸ Cáº¥u trÃºc chuáº©n: `namespace.subgroup.property = value`

- `application.properties` lÃ  file cáº¥u hÃ¬nh chÃ­nh trong Spring Boot, Ä‘Æ°á»£c Ä‘á»ƒ trong `src/main/resources/`.

VÃ­ dá»¥:

```properties
spring.datasource.url=jdbc:mysql://...
server.port=8080
app.jwt.secret=ABC123
myapp.payment.timeout=3000
```

### ğŸ“Œ Quy táº¯c quan trá»ng:

| Quy táº¯c                                                     | Giáº£i thÃ­ch                                         |
| ----------------------------------------------------------- | -------------------------------------------------- |
| âœ… TÃªn báº±ng **lowercase**                                   | KhÃ´ng dÃ¹ng chá»¯ hoa                                 |
| âœ… DÃ¹ng `.` Ä‘á»ƒ **phÃ¢n nhÃ³m (namespace)**                    | `loda.mysql.url`, `app.jwt.secret`                 |
| âŒ KhÃ´ng nÃªn dÃ¹ng `_` hoáº·c `-`                              | Sáº½ lá»—i khi binding báº±ng `@ConfigurationProperties` |
| âœ… CÃ³ thá»ƒ dÃ¹ng `-` cho cÃ¡c key Ä‘Ã£ chuáº©n nhÆ° `logging.level` | VÃ¬ Spring Boot cÃ³ sáºµn parser xá»­ lÃ½                 |

---

## ğŸ§  CÃ¡ch Ä‘áº·t tÃªn cáº¥u hÃ¬nh chuáº©n & chuyÃªn nghiá»‡p

| DÃ¹ng cho...      | TÃªn nÃªn dÃ¹ng                                      |
| ---------------- | ------------------------------------------------- |
| Config chung app | `app.name`, `app.version`, `app.author`           |
| JWT Auth         | `app.jwt.secret`, `app.jwt.expiration`            |
| External Service | `external.mailgun.api-key`, `external.zalo.token` |
| Email            | `mail.host`, `mail.username`, `mail.password`     |
| TÃ­ch há»£p Payment | `payment.vnpay.url`, `payment.momo.partner-code`  |
| Cáº¥u hÃ¬nh custom  | `myapp.feature.enabled`, `myapp.cache.ttl`        |

---

## âœ… Náº¿u dÃ¹ng `@ConfigurationProperties`:

Spring sáº½ tá»± map theo cáº¥u trÃºc:

```properties
loda.mysql.url=...
loda.mysql.user=...
```

```java
@ConfigurationProperties(prefix = "loda.mysql")
public class MysqlConfig {
    private String url;
    private String user;
}
```

> âœ… Spring sáº½ tá»± **chuyá»ƒn `kebab-case`, `camelCase`, `underscore_case` â†’ field name** náº¿u cáº¥u trÃºc há»£p lÃ½.

---

## âœ… TÃ³m táº¯t

| ÄÆ°á»£c lÃ m âœ…                           | TrÃ¡nh âŒ                                                 |
| ------------------------------------- | -------------------------------------------------------- |
| DÃ¹ng `.` Ä‘á»ƒ nhÃ³m cáº¥u hÃ¬nh             | TrÃ¡nh dáº¥u `_`, kÃ½ tá»± Ä‘áº·c biá»‡t                            |
| NhÃ³m theo chá»©c nÄƒng                   | KhÃ´ng Ä‘áº·t tÃªn lung tung, khÃ³ Ä‘á»c                         |
| DÃ¹ng lowercase                        | KhÃ´ng dÃ¹ng chá»¯ in hoa                                    |
| CÃ³ prefix riÃªng náº¿u lÃ  config cá»§a báº¡n | Äá»«ng trÃ¹ng vá»›i `spring.*`, `server.*` náº¿u khÃ´ng override |
