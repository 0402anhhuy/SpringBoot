# ğŸŒ± Annotation **`@Controller`**

## âœ… 1. `@Controller` lÃ  gÃ¬?

- `@Controller` lÃ  má»™t annotation trong Spring MVC dÃ¹ng Ä‘á»ƒ Ä‘Ã¡nh dáº¥u má»™t **class lÃ  Web Controller**
- Chá»‹u trÃ¡ch nhiá»‡m xá»­ lÃ½ **HTTP request** vÃ  **tráº£ vá» view (HTML)** thay vÃ¬ JSON

> NÃ³ lÃ  pháº§n cá»‘t lÃµi trong **Spring MVC** â€“ mÃ´ hÃ¬nh "Model â€“ View â€“ Controller".

---

## ğŸ“ 2. á»¨ng dá»¥ng cá»§a **`@Controller`**

```java
@Controller
public class HomeController {
    @GetMapping("/")
    public String home() {
        return "index"; // tráº£ vá» view templates/index.html
    }
}
```

## âœ… 3. CÃ¡ch hoáº¡t Ä‘á»™ng cá»§a `@Controller`:

- ÄÆ°á»£c Spring Boot quÃ©t (component scan)
- ÄÄƒng kÃ½ lÃ m **bean** vÃ o ApplicationContext
- Káº¿t há»£p vá»›i `@RequestMapping`, `@GetMapping`, `@PostMapping`,...
- Tráº£ vá» tÃªn **view template** Ä‘á»ƒ hiá»ƒn thá»‹ cho user

---

## ğŸ§ª VÃ­ dá»¥ cÆ¡ báº£n dÃ¹ng `@Controller`

### ğŸ“ `HomeController.java`

```java
@Controller
public class HomeController {

    @GetMapping("/")
    public String homePage(Model model) {
        model.addAttribute("message", "ChÃ o má»«ng Ä‘áº¿n vá»›i SpringMall!");
        return "home"; // tráº£ vá» file templates/home.html
    }
}
```

### ğŸ“ `resources/templates/home.html`

```html
<!DOCTYPE html>
<html>
  <head>
    <title>Home</title>
  </head>
  <body>
    <h1 th:text="${message}"></h1>
  </body>
</html>
```

---

## ğŸ“Œ 4. CÃ¡ch sá»­ dá»¥ng chung

| Annotation                    | Má»¥c Ä‘Ã­ch                                              |
| ----------------------------- | ----------------------------------------------------- |
| `@Controller`                 | Äá»‹nh nghÄ©a class xá»­ lÃ½ request vÃ  tráº£ vá» view         |
| `@RequestMapping`             | Mapping URL chung cho class hoáº·c method               |
| `@GetMapping`, `@PostMapping` | Mapping HTTP method                                   |
| `Model`                       | Gá»­i dá»¯ liá»‡u tá»›i view                                  |
| `return "tÃªn view"`           | Spring sáº½ tÃ¬m view á»Ÿ `resources/templates/{tÃªn}.html` |
| `@RequestParam(...)`          | Láº¥y giÃ¡ trá»‹ tá»« URL query string                       |

### ğŸ© `@RequestParam(...) String name`

| Tham sá»‘             | Ã nghÄ©a                                                        |
| ------------------- | -------------------------------------------------------------- |
| `name = "name"`     | Láº¥y tham sá»‘ `name` tá»« URL `?name=Huy`                          |
| `required = false`  | KhÃ´ng báº¯t buá»™c pháº£i cÃ³, náº¿u khÃ´ng cÃ³ thÃ¬ dÃ¹ng giÃ¡ trá»‹ máº·c Ä‘á»‹nh |
| `defaultValue = ""` | Náº¿u khÃ´ng cÃ³ `?name=...` thÃ¬ `name` = chuá»—i rá»—ng               |

ğŸ§  **VÃ­ dá»¥:**

- `/hello?name=Huy` â†’ biáº¿n `name = "Huy"`
- `/hello` â†’ khÃ´ng cÃ³ `name` â†’ biáº¿n `name = ""`

### ğŸ¥ `model.addAttribute()`

- MÃ´ hÃ¬nh hoáº¡t Ä‘á»™ng:

```markdown
Client (Request) â†’ Controller (Xá»­ lÃ½ logic + Model) â†’ View (HTML hiá»ƒn thá»‹ báº±ng Thymeleaf)
```

- CÃº phÃ¡p:

```java
model.addAttribute(String attributeName, Object attributeValue);
```

| Tham sá»‘          | Ã nghÄ©a                                             |
| ---------------- | --------------------------------------------------- |
| `attributeName`  | TÃªn biáº¿n báº¡n sáº½ dÃ¹ng trong view (trong file html)   |
| `attributeValue` | GiÃ¡ trá»‹ cá»§a biáº¿n (chuá»—i, sá»‘, object, list, map,...) |

### ğŸ§ª VÃ­ dá»¥:

ğŸ§± `Controller`:

```java
@GetMapping("/hello")
public String hello(Model model) {
    model.addAttribute("name", "Anh Huy");
    return "hello";
}
```

ğŸ“„ `hello.html`:

```html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <body>
    <h1>Xin chÃ o, <span th:text="${name}">báº¡n</span>!</h1>
  </body>
</html>
```

## âœ… 5. Khi nÃ o dÃ¹ng `@Controller`

| TrÆ°á»ng há»£p                          | NÃªn dÃ¹ng?                          |
| ----------------------------------- | ---------------------------------- |
| Báº¡n viáº¿t website cÃ³ giao diá»‡n HTML  | âœ…                                 |
| DÃ¹ng Thymeleaf, JSP, Mustache       | âœ…                                 |
| Dá»± Ã¡n REST API / mobile app backend | âŒ DÃ¹ng `@RestController` thay tháº¿ |

## â— 6. So sÃ¡nh `@Controller` vs `@RestController`

| Annotation        | Má»¥c Ä‘Ã­ch               | Tráº£ vá»                               |
| ----------------- | ---------------------- | ------------------------------------ |
| `@Controller`     | Tráº£ vá» **View** (HTML) | TÃªn cá»§a file HTML trong `templates/` |
| `@RestController` | Tráº£ vá» **JSON/XML**    | Response body                        |

> ğŸ”¥ `@RestController = @Controller + @ResponseBody`
