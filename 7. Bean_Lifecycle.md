# 🌱 Bean Lifecycle

## **📌 1. Vòng đời của Bean**
- **Tạo đối tượng (Instantiation)** → Spring tạo một instance của Bean.

- **Tiêm phụ thuộc (Dependency Injection)** → Spring tiêm các dependencies vào Bean.

- **Sau khi khởi tạo (Post-Initialization)** → Gọi các phương thức tùy chỉnh sau khi Bean được tạo.

- **Sử dụng Bean (Usage)** → Bean được sử dụng trong ứng dụng.

- **Trước khi hủy (Pre-Destruction)** → Gọi các phương thức dọn dẹp trước khi Bean bị hủy.

- **Hủy Bean (Destruction)** → Spring xóa Bean khỏi bộ nhớ.

📌 **`@Scope("singleton")`** → Spring quản lý toàn bộ vòng đời của Bean.

📌 **`@Scope("prototype")`** → Spring chỉ quản lý việc **tạo và tiêm dependencies**, không quản lý việc hủy.

## **🔹 2. Triển khai các phương thức vòng đời**
- Sử dụng **`@PostConstruct`** và **`@PreDestroy`**

- Ví dụ:
```java
@Component
public class Car{

    public Car(){
        System.out.println("🚗 Car Bean được tạo!");
    }

    @PostConstruct
    public void init(){
        System.out.println("🔧 Car Bean đã khởi tạo!");
    }

    @PreDestroy
    public void destroy(){
        System.out.println("💥 Car Bean bị hủy!");
    }
}
```
- Kết quả:

    🚗 Car Bean được tạo!  
    🔧 Car Bean đã khởi tạo!  
    💥 Car Bean bị hủy!  

##  **😊 3. Giải thích vòng đời Bean**
### **1️⃣ Khởi Động Spring Boot**

- Lệnh **`SpringApplication.run(StoreApplication.class, args)`** sẽ:
    - Tạo và cấu hình ApplicationContext (Spring Container).
    - Quét và tìm kiếm các Bean (Component Scanning).
    - Khởi tạo và quản lý Bean.

### **2️⃣ Tạo ApplicationContext và Quét Bean**
- Spring Boot sử dụng `Component Scanning` để tìm tất cả các Bean bên trong package chứa **`@SpringBootApplication`**.

### **3️⃣ Inject Bean (Dependency Injection)**
- Spring inject **Engine** vào **Car** thông qua constructor (**`@Autowired`**).

- Vì **Car** là **singleton**, nó sẽ chỉ được tạo một lần và lưu trong **`ApplicationContext`**.

### **4️⃣ Trả Về ApplicationContext**
- Sau khi khởi tạo tất cả các **`Bean`**, **`SpringApplication.run(StoreApplication.class, args)`**
- Trả về một ApplicationContext để ứng dụng có thể lấy Bean từ đó.

### **5️⃣ Sử Dụng Bean**
- Lúc này, Car car1 đã được lấy từ `Spring Container` và có thể sử dụng.

### **6️⃣ Tắt Ứng Dụng - Hủy Bean (Destruction)**
- Car có phương thức hủy **`@PreDestroy`**, Spring sẽ gọi trước khi đóng ứng dụng.