# ğŸŒ± Annotation **`@PostMapping`**

## ğŸ† **`@PostMapping`**

- ÄÆ°á»£c sá»­ dá»¥ng Ä‘á»ƒ xá»­ lÃ½ cÃ¡c yÃªu cáº§u HTTP POST

- ThÆ°á»ng Ä‘Æ°á»£c Ã¡p dá»¥ng cho cÃ¡c phÆ°Æ¡ng thá»©c trong lá»›p Ä‘Æ°á»£c Ä‘Ã¡nh dáº¥u báº±ng **`@Controller`** hoáº·c **`@RestController`**

- KhÃ¡i niá»‡m vá» GET vÃ  POST trong HTTP:
  - **GET**: Láº¥y dá»¯ liá»‡u tá»« mÃ¡y chá»§
  - **POST**: Gá»­i dá»¯ liá»‡u Ä‘áº¿n mÃ¡y chá»§ Ä‘á»ƒ táº¡o má»›i hoáº·c cáº­p nháº­t tÃ i nguyÃªn

## ğŸƒ **`@RequestMapping`**

- Trong trÆ°á»ng há»£p muá»‘n táº¥t cáº£ cÃ¡c **method** Ä‘á»u dÃ¹ng chung má»™t cÃ¡ch xá»­ lÃ½ thÃ¬ cÃ³ thá»ƒ sá»­ dá»¥ng annotation **`@RequestMapping`**

- **`@RequestMapping`** lÃ  má»™t annotation cÃ³ Ã½ nghÄ©a vÃ  má»¥c Ä‘Ã­ch sá»­ dá»¥ng rá»™ng hÆ¡n cÃ¡c loáº¡i **`@GetMapping`**, **`@PostMapping`**,...

- CÃº phÃ¡p

```java
@Controller
@RequestMapping("api/v1")
public class WebController {

    // ÄÆ°á»ng dáº«n lÃºc nÃ y lÃ : /api/v1/addTodo vÃ  method GET
    @RequestMapping(value = "/addTodo", method = RequestMethod.GET)
    public String addTodo(Model model) {
        return "addTodo";
    }

    // ÄÆ°á»ng dáº«n lÃºc nÃ y lÃ : /api/v1/addTodo vÃ  method POST
    @RequestMapping(value = "/addTodo", method = RequestMethod.POST)
    public String addTodo(@ModelAttribute Todo todo) {
        return "success";
    }
}
```

- Trong Ä‘Ã³:

  - **`value`**: Chá»‰ Ä‘á»‹nh Ä‘Æ°á»ng dáº«n URL mÃ  phÆ°Æ¡ng thá»©c sáº½ xá»­ lÃ½
  - **`method`**: Chá»‰ Ä‘á»‹nh phÆ°Æ¡ng thá»©c HTTP (POST, GET, PUT, DELETE,...)

- Náº¿u khÃ´ng chá»‰ Ä‘á»‹nh **method** cho **`@RequestMapping`** thÃ¬ nÃ³ sáº½ nháº­n toÃ n bá»™ cÃ¡c **method**

## â˜• Web Todo

**ğŸ Model**

- Táº¡o má»™t Ä‘á»‘i tÆ°á»£ng **`Todo`** Ä‘á»ƒ lÆ°u trá»¯ thÃ´ng tin cá»§a má»™t cÃ´ng viá»‡c cáº§n lÃ m

**`Todo.java`**

```java
import lombok.Data;

@Data
public class Todo {
    private String title;
    private String description;
}
```

**ğŸ¥ Controller**

- Táº¡o má»™t **`WebController`** Ä‘á»ƒ xá»­ lÃ½ cÃ¡c yÃªu cáº§u tá»« ngÆ°á»i dÃ¹ng

**`WebController.java`**

```java
@Controller
public class WebController {
    @GetMapping("/addTodo")
    public String showAddTodoForm(Model model) {
        model.addAttribute("todo", new Todo());
        return "addTodo";
    }

    @PostMapping("/addTodo")
    public String submitTodo(@ModelAttribute Todo todo, Model model) {
        // CÃ³ thá»ƒ xá»­ lÃ½ todo á»Ÿ Ä‘Ã¢y: lÆ°u DB, in log, v.v.
        System.out.println("ğŸ“ TODO nháº­n Ä‘Æ°á»£c: " + todo.getTitle() + " - " + todo.getDescription());

        model.addAttribute("todo", todo);
        return "success";
    }
}
```

**ğŸ› GET /addTodo - Trang thÃªm cÃ´ng viá»‡c**

- `GET /addTodo` tráº£ vá» webpage cho ngÆ°á»i dÃ¹ng nháº­p thÃ´ng tin cÃ´ng viá»‡c vÃ  thÃªm vÃ o danh sÃ¡ch viá»‡c cáº§n lÃ m

**`WebController.java`**

```java
@GetMapping("/addTodo")
public String showAddTodoForm(Model model) {
  model.addAttribute("todo", new Todo());
  return "addTodo";
}
```

**`addTodo.html`**

```html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">
  <head>
    <meta charset="UTF-8" />
    <title>ThÃªm Todo</title>
  </head>
  <body>
    <h2>ThÃªm má»›i cÃ´ng viá»‡c</h2>

    <form th:action="@{/addTodo}" th:object="${todo}" method="post">
      <div>
        <label for="title">TiÃªu Ä‘á»:</label>
        <input type="text" id="title" th:field="*{title}" />
      </div>

      <div>
        <label for="description">MÃ´ táº£:</label>
        <textarea id="description" th:field="*{description}"></textarea>
      </div>

      <button type="submit">ThÃªm</button>
    </form>
  </body>
</html>
```

- Trong **form**, ta láº¥y ra Ä‘á»‘i tÆ°á»£ng Todo vÃ  chá»‰ Ä‘á»‹nh bá»Ÿi **`th:object="${todo}"`**

- GÃ¡n thÃ´ng tin ngÆ°á»i dÃ¹ng nháº­p vÃ o Todo báº±ng cÃº phÃ¡p **`th:field=*{tÃªn_thuá»™c_tÃ­nh}`**

- Báº¥m **Button** thÃ¬ form sáº½ gá»­i request POST cÃ³ chá»©a Todo lÃªn Ä‘á»‹a chá»‰ **`/addTodo`**

**ğŸ± POST /addTodo - ThÃªm cÃ´ng viá»‡c vÃ o danh sÃ¡ch**

- `POST /addTodo` nháº­n thÃ´ng tin cÃ´ng viá»‡c tá»« ngÆ°á»i dÃ¹ng vÃ  xá»­ lÃ½ nÃ³

**`WebController.java`**

```java
@PostMapping("/addTodo")
public String submitTodo(@ModelAttribute Todo todo, Model model) {
  // CÃ³ thá»ƒ xá»­ lÃ½ todo á»Ÿ Ä‘Ã¢y: lÆ°u DB, in log,...
  System.out.println("ğŸ“ TODO nháº­n Ä‘Æ°á»£c: " + todo.getTitle() + " - " + todo.getDescription());

  model.addAttribute("todo", todo);
  return "success";
}
```

**`success.html`**

```html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">
  <head>
    <meta charset="UTF-8" />
    <title>ThÃªm TODO thÃ nh cÃ´ng</title>
  </head>
  <body>
    <h2>âœ… ÄÃ£ thÃªm TODO!</h2>

    <p>
      <strong>TiÃªu Ä‘á»:</strong>
      <span th:text="${todo.title}">[TiÃªu Ä‘á»]</span>
    </p>

    <p>
      <strong>MÃ´ táº£:</strong>
      <span th:text="${todo.description}">[MÃ´ táº£]</span>
    </p>
  </body>
</html>
```
